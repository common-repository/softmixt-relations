(function(c){c(function(){e()});c(document).on("click",".js-add-connection",function(){var i=c(this).data("post-id");var g=c(this).data("post-title");var q=c(this).data("post-type");var s=c('.js-relations-itm[data-post-id="'+i+'"]');var h=s.find(".js-posts-to-connect-tax-data");var r=c("<li>");r.attr("data-post-title",g);r.attr("data-post-type",q);r.attr("data-post-id",i);r.addClass("js-connected-itm");r.addClass("sft-rel-connected-item");var m=c("<div>").addClass("sft-rel-section-item-head");var p=c("<span>");p.attr("data-post-id",i);p.addClass("dashicons");p.addClass("dashicons-trash");p.addClass("js-remove-connection");p.addClass("sft-rel-remove-connection");var n=c("<span>").text(g);var l=c("<span>");l.attr("data-post-id",i);l.addClass("dashicons");l.addClass("dashicons-arrow-down");l.addClass("sft-rel-toggle-connected-item");l.addClass("js-toggle-connected-item");m.append(p).append(n).append(l);var k=c("<div>").hide();k.addClass("sft-rel-section-item");k.addClass("js-section-item");var o=c("<ul>").addClass("categorychecklist");o.addClass("form-no-clear");k.append(o);var j=c("<input>").val(i);j.attr("type","hidden");j.attr("name","connected_post[]");r.append(m).append(k).append(j);console.log(h.length);if(h.length){h.each(function(w,z){var v=c(this).data("taxonomy-name");var t=c(this).val();var u=c("<input>").val(1);u.attr("type","checkbox");u.attr("id","in-taxonomy-"+v);u.attr("name","connected_post_taxonomies["+i+"]["+v+"]");u.val(v);var y=c("<label>").addClass("selectit").text(t).prepend(u);var x=c("<li>").append(y);x.attr("id","sft-rel-taxonomy-"+v);x.addClass("popular-category");o.append(x)})}else{var f=c("<li>").text(c(".js-text-references").data("no-taxonomies")).addClass("sft-rel-post-no-taxonomies");o.append(f)}c(".js-connected-posts").append(r);s.hide();a();c(".js-connected-no-connections").hide()});c(document).on("change",".js-connected-post-taxonomies-checkbox",function(){a()});c(document).on("click",".js-toggle-connected-item",function(){var g=this;var f=c(this).data("post-id");c('[data-post-id="'+f+'"]').find(".js-section-item").slideToggle("fast",function(){if(c(g).hasClass("dashicons-arrow-down")){c(g).removeClass("dashicons-arrow-down").addClass("dashicons-arrow-up")}else{c(g).removeClass("dashicons-arrow-up").addClass("dashicons-arrow-down")}})});c(document).on("click",".js-remove-connection",function(){if(confirm(c(".js-text-references").data("remove-taxonomy"))){var f=c(this).data("post-id");c('.js-connected-itm[data-post-id="'+f+'"]').remove();c('.sft-rel-not-connected[data-post-id="'+f+'"]').show();if(c(".js-connected-itm").length===0){c(".js-connected-no-connections").show()}a()}});c(document).on("change",".js-select-post-type",function(){d(this,".js-relations-itm",".js-posts-to-connect",".js-search-posts")});c(document).on("keyup paste",".js-search-posts",function(){b(this,".js-select-post-type",".js-posts-to-connect",".js-relations-itm")});c(document).on("change",".js-select-related-post-type",function(){d(this,".js-connected-itm",".js-connected-posts",".js-search-connected-posts")});c(document).on("keyup paste",".js-search-connected-posts",function(){b(this,".js-select-related-post-type",".js-connected-posts",".js-connected-itm")});function e(){c(".js-connected-posts").sortable({handle:".sft-rel-section-item-head",revert:true,update:function(f,g){a()}})}function d(j,k,i,g){var h=c(j).val();var f=c(k);var g=c(g).val();if(h==="all"){if(g){f.each(function(){var m=c(this).attr("data-post-title");var l=new RegExp(g.toLowerCase());if(l.test(m.toLowerCase())){c(this).show()}else{c(this).hide()}})}else{f.show()}}else{f.hide();if(g){f.each(function(){var m=c(this).attr("data-post-type");var n=c(this).attr("data-post-title");var l=new RegExp(g.toLowerCase());if(l.test(n.toLowerCase())&&m===h){c(this).show()}else{c(this).hide()}})}else{c(i+' > [data-post-type="'+h+'"] ').show()}}}function b(k,i,f,l){var j=c(i).val();var h=c(k).val();var g=c(l);if(j==="all"){g.show();g.each(function(){var n=c(this).attr("data-post-title");var m=new RegExp(h.toLowerCase());if(m.test(n.toLowerCase())){c(this).show()}else{c(this).hide()}})}else{g.hide();c(f+' > [data-post-type="'+j+'"] ').show();g.each(function(){var n=c(this).attr("data-post-title");var m=new RegExp(h.toLowerCase());if(m.test(n.toLowerCase())){if(c(this).attr("data-post-type")===j){c(this).show()}else{c(this).hide()}}else{c(this).hide()}})}}function a(){c(".js-update-your-post").show()}})(jQuery);